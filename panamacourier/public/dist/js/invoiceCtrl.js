"use strict";$(document).ready(function(){$("#dtble").DataTable({order:[[0,"desc"]]}),searchInvoice(1)});var searchInvoice=function(o){var a=window.location.origin+window.location.pathname+"/"+o;$.ajax({url:a,type:"POST",dataType:"json",data:{id:o},beforeSend:function(){$("#ics_option_load").html('<i class="fa fa-spin fa-spinner"></i> Cargando...')},success:function(i){"true"==i.message&&($("#ics_selected_option").html(i.alert),$("#ics_pnlreceipt").load(a,function(){$("#dtble").DataTable({order:[[0,"desc"]]}),"en"==messages.language&&($("#dataTableSearch").attr("placeholder","Search..."),$("#dtble_next").html("Next"),$("#dtble_previous").html("Previous"),$(".dataTables_empty").html("No data to show...")),$('[data-toggle="tooltip"]').tooltip(),$("#ics_htype").val(o)}),$("#ics_option_load").html(""))},error:function(){bootbox.alert("Ha ocurrido un error, intentelo de nuevo")}})},paid=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/checkIn";bootbox.dialog({title:"<span id=''>Pago</span>",message:$("#load").load(a,function(){$("select").select2()}),size:"medium",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(o){$("#load").hide().appendTo("body")}).modal("show")},executePaid=function(o){var a=$("#ics_formSerial").serialize(),i=window.location.origin+window.location.pathname+"/"+o+"/checkIn",t=$("#ics_htype").val();$.ajax({url:i,type:"POST",dataType:"json",data:a,beforeSend:function(){$("#ics-checkpayd").html('<i class="fa fa-spin fa-spinner"></i> Cargando...')},success:function(o){"true"==o.message?($("#load").load(i,function(){$("#ics-checkpayd").html('<i class="fa fa-check"></i> Pago registrado'),$("select").select2()}),searchInvoice(t)):(evalJson(o.alert),$("#ics-checkpayd").html(""))},error:function(){bootbox.alert("Ha ocurrido un error, intentelo de nuevo")}})},innerCheckin=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/innerChekin",i=$("#ics_htype").val();$.ajax({url:a,type:"GET",dataType:"json",data:{id:o},beforeSend:function(){$("#ics_innercheckinicon").html('<i class="fa fa-spin fa-spinner"></i>')},success:function(o){"true"==o.message?searchInvoice(i):bootbox.alert("no se pudo agregar la factura")},error:function(){bootbox.alert("Ha ocurrido un error, intentelo de nuevo")}})},showPayments=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/showPayment";bootbox.dialog({title:"<span style='float: left' id='ics_back_icon'></span><span id='ics_pay_history'>Historial de Pago</span><p><a id='ics_title_head_modal' class='pull-right' href='javascript:ics_print(true, false, "+o+")' style='color:#23527c' data-toggle='tooltip' title='imprimir'><i class='fa fa-print' aria-hidden='true' ></i></a></p> ",message:$("#load").load(a,function(){$('[data-toggle="tooltip"]').tooltip(),$("#load").append('<div class="panel-footer" id="pft"></div>')}),size:"medium",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(o){$("#load").hide().appendTo("body")}).modal("show")},detailPayment=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/paymentDetail";$("#load").load(a,function(){$("#ics_back_icon").show(),$("#ics_back_icon").html("<a href='javascript:ics_back("+$("#ics_hreceipt").val()+")' data-toggle='tooltip' title='atrÃ¡s'><span class='text-muted'><span class='glyphicon glyphicon-menu-left'></span><span></a>"),$("#ics_pay_history").html("Detalle de Pago"),$("#ics_title_head_modal").attr("href","javascript:ics_print(true, true, "+o+")"),$("#load").append('<div class="panel-footer" id="pft"></span></div>'),$('[data-toggle="tooltip"]').tooltip()})},ics_back=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/showPayment";$("#load").load(a,function(){$("#ics_back_icon").hide(),$("#ics_pay_history").html("Historial de Pago"),$("#load").append('<div class="panel-footer" id="pft"></div>'),$("#ics_title_head_modal").attr("href","javascript:ics_print(true, false, "+o+")"),$('[data-toggle="tooltip"]').tooltip()})},ics_print=function(o,a,i){if(1==o)if(1==a){var t=window.location.origin+window.location.pathname+"/"+i+"/paymentDetail",n=window.open(t,"Print","width=950, height=500, toolbar=0, resizable=0");n.addEventListener("load",function(){n.print()},!0)}else{var t=window.location.origin+window.location.pathname+"/"+i+"/showPayment",n=window.open(t,"Print","width=950, height=500, toolbar=0, resizable=0");n.addEventListener("load",function(){n.print()},!0)}},icsShowWarehouseOnReceipt=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/showWarehouse";bootbox.dialog({title:"Informacion",message:$("#load").load(a,function(){$('[data-toggle="tooltip"]').tooltip(),$("select").select2()}),size:"large",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(o){$("#load").hide().appendTo("body")}).modal("show")},icsShowPickupOnReceipt=function(o){var a=window.location.origin+window.location.pathname+"/"+o+"/showPickup";bootbox.dialog({title:"Informacion",message:$("#load").load(a,function(){$('[data-toggle="tooltip"]').tooltip(),$("select").select2()}),size:"large",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(o){$("#load").hide().appendTo("body")}).modal("show")};