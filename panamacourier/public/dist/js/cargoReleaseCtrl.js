function loadButton(e){$(e).attr("disabled","true"),$(e).html('<i class="fa fa-circle-o-notch fa-spin"></i> Espere...')}function preview_image(){for(var e=countimg+1,t=document.getElementById("upload_file").files.length,n=0;n<t;n++)$("#image_preview").append("<div class='preview' id='prev"+e+"'><div class='divimg'><img class='thumbnailp' src='"+URL.createObjectURL(event.target.files[n])+"'></div><a class='removeimg' onclick=remove_preview('prev"+e+"')>Eliminar</a>")}function remove_preview(e){$("#"+e).remove()}function disabledClients(e){$("#name,#phone,#email,#identifier,#direction").attr("disabled","true"===e)}function showPackages(e){$("#packageTitle,#width,#height,#weight,#value,#type,#invoice,#categoryDiv,#taxdiv").attr("style","display:"+e)}function showDestination(e){$("#destinationTitle,#destinationName,#destinationPhone,#destinationEmail,#destinationIdentifier,#destinationSelect,#destinationDirection").attr("style","display:"+e),$("#destin_name,#destin_phone,#destin_email,#destin_identifier,#destin_direction").attr("required","block"===e)}function showClients(e,t){$("#clientTitle,#clientName,#clientPhone,#clientEmail,#clientIdentifier, #clientDirection").attr("style","display:"+e),$("#name,#phone,#email,#identifier,#direction").attr("required","block"==e),disabledClients(t),showPackages(e),showDestination(e)}function showSelects(e){var t=e.selectedIndex,n=e.options[t].value;return 0==n?(document.getElementById("finalDestinationUser").style.display="none",document.getElementById("finalDestinationUser").required=!1,document.getElementById("finalDestinationClient").style.display="block",void(document.getElementById("finalDestinationClient").required=!0)):(document.getElementById("finalDestinationClient").style.display="none",document.getElementById("finalDestinationClient").required=!1,document.getElementById("finalDestinationUser").style.display="block",void(document.getElementById("finalDestinationUser").required=!0))}function showElements(e){return $("#divButton,#divObservation,#divdimens,#divweight,#divvalue").attr("style","display:block,"),1==e?(document.getElementById("client").style.display="block",document.getElementById("divcli").style.display="block",showClients("block","false"),$("#courier,#divTracking,#destination").attr("style","display:none"),document.getElementById("tracking").required=!1):2==e?(document.getElementById("client").style.display="none",document.getElementById("divcli").style.display="none",showClients("none"),$("#courier,#divTracking,#destinationTitle,#destination").attr("style","display:block"),document.getElementById("tracking").required=!0,showPackages("block")):(showClients("none"),$("#client,#courier,#divTracking,#destination,#divButton,#divObservation").attr("style","display:none"),document.getElementById("tracking").required=!1,showPackages("none")),!1}function setDataUsertoring(e){e?(document.getElementById("name").value=e.code+" "+e.name+" "+e.last_name,document.getElementById("phone").value=e.local_phone,document.getElementById("email").value=e.email,document.getElementById("direction").value=e.address,document.getElementById("zipcode").value=e.postal_code,document.getElementById("country").value=e.country,document.getElementById("region").value=e.region):(document.getElementById("name").value="",document.getElementById("phone").value="",document.getElementById("email").value="",document.getElementById("direction").value="",document.getElementById("zipcode").value="",document.getElementById("country").value="",document.getElementById("region").value="")}function setDataDestinationUser(e){e?(document.getElementById("destin_name").value=e.code+" "+e.name,document.getElementById("destin_lastname").value=e.last_name,document.getElementById("destin_dni").value=e.dni,document.getElementById("destin_phone").value=e.local_phone,document.getElementById("destin_cell").value=e.cell,document.getElementById("destin_email").value=e.email,document.getElementById("destin_direction").value=e.address,document.getElementById("destin_zipcode").value=e.postal_code,document.getElementById("destin_country").value=e.country,document.getElementById("destin_region").value=e.region,document.getElementById("destin_city").value=e.city):(document.getElementById("destin_name").value="",document.getElementById("destin_lastname").value="",document.getElementById("destin_dni").value="",document.getElementById("destin_phone").value="",document.getElementById("destin_cell").value="",document.getElementById("destin_email").value="",document.getElementById("destin_direction").value="",document.getElementById("destin_zipcode").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="")}function setDataConsignationUser(e){e?(document.getElementById("cons_name").value=e.code+" "+e.name+" "+e.last_name,document.getElementById("cons_lastname").value=e.last_name,document.getElementById("cons_dni").value=e.dni,document.getElementById("cons_phone").value=e.local_phone,document.getElementById("cons_cell").value=e.cell,document.getElementById("cons_email").value=e.email,document.getElementById("cons_direction").value=e.address,document.getElementById("cons_zipcode").value=e.postal_code,$("#clientSelectCountry").hide(),$("#clientCountry").show(),document.getElementById("cons_country").value=e.country,document.getElementById("cons_region").value=e.region,document.getElementById("cons_city").value=e.city):(document.getElementById("cons_name").value="",document.getElementById("cons_lastname").value="",document.getElementById("cons_dni").value="",document.getElementById("cons_phone").value="",document.getElementById("cons_cell").value="",document.getElementById("cons_email").value="",document.getElementById("cons_direction").value="",document.getElementById("cons_zipcode").value="",document.getElementById("cons_country").value="",document.getElementById("cons_region").value="",document.getElementById("cons_city").value="")}function preview_image(){for(var e=countimg+1,t=document.getElementById("upload_file").files.length,n=0;n<t;n++)$("#image_preview").append("<div class='preview' id='prev"+e+"'><div class='divimg'><img class='thumbnailp' src='"+URL.createObjectURL(event.target.files[n])+"'></div><a class='removeimg' onclick=remove_preview('prev"+e+"')>Eliminar</a>")}function remove_preview(e){console.log,$("#"+e).remove()}$(document).ready(function(){$("#release_date").datepicker({dateFormat:"yy-mm-dd"}),$("#release_time").datetimepicker({format:"HH:mm:ss"}),$("#clientCountry").hide(),$("select").select2({width:"100%"}).on("select2:select",function(e){var el=$(e.currentTarget);if("from"==el.attr("id"))showElements(el.val());else if("clientSelect"==el.attr("id")){showClients("block","true");var item=eval("("+el.find("option:selected").attr("item")+")");setDataClient(item)}else if("cons_country"==el.attr("id"));else if("finalOriginUser"==el.attr("id")){var item=eval("("+el.find("option:selected").attr("item")+")");setDataUsertoring(item)}else if("clientSelectCountry "==el.attr("id"))if("addud"==el.find("option:selected").val())$("#destin_name").removeAttr("readonly"),$("#destin_lastname").removeAttr("readonly"),$("#destin_dni").removeAttr("readonly"),$("#destin_phone").removeAttr("readonly"),$("#destin_cell").removeAttr("readonly"),$("#destin_email").removeAttr("readonly"),$("#destin_zipcode").removeAttr("readonly"),$("#destin_country").removeAttr("readonly"),$("#destin_region").removeAttr("readonly"),$("#destin_city").removeAttr("readonly"),$("#destin_direction").removeAttr("readonly"),document.getElementById("destin_name").value="",document.getElementById("destin_lastname").value="",document.getElementById("destin_dni").value="",document.getElementById("destin_phone").value="",document.getElementById("destin_cell").value="",document.getElementById("destin_email").value="",document.getElementById("destin_direction").value="",document.getElementById("destin_zipcode").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="",document.getElementById("clientCountry").style.display="none",document.getElementById("clientSelectCountry").style.display="none";else{$("#destin_name").attr("readonly","readonly"),$("#destin_lastname").attr("readonly","readonly"),$("#destin_dni").attr("readonly","readonly"),$("#destin_phone").attr("readonly","readonly"),$("#destin_cell").attr("readonly","readonly"),$("#destin_email").attr("readonly","readonly"),$("#destin_zipcode").attr("readonly","readonly"),$("#destin_country").attr("readonly","readonly"),$("#destin_region").attr("readonly","readonly"),$("#destin_city").attr("readonly","readonly"),$("#destin_direction").attr("readonly","readonly");var item=eval("("+el.find("option:selected").attr("item")+")");setDataDestinationUser(item)}else if("finalConsigUser"==el.attr("id"))if("adduc"==el.find("option:selected").val())console.log("aqui"),$("#cons_name").removeAttr("readonly"),$("#cons_lastname").removeAttr("readonly"),$("#cons_dni").removeAttr("readonly"),$("#cons_phone").removeAttr("readonly"),$("#cons_cell").removeAttr("readonly"),$("#cons_email").removeAttr("readonly"),$("#cons_zipcode").removeAttr("readonly"),$("#cons_region").removeAttr("readonly"),$("#cons_city").removeAttr("readonly"),$("#cons_direction").removeAttr("readonly"),document.getElementById("cons_name").value="",document.getElementById("cons_lastname").value="",document.getElementById("cons_dni").value="",document.getElementById("cons_phone").value="",document.getElementById("cons_cell").value="",document.getElementById("cons_email").value="",document.getElementById("cons_direction").value="",$("#clientCountry").hide(),$("#clientSelectCountry").show(),document.getElementById("cons_zipcode").value="",document.getElementById("cons_region").value="",document.getElementById("cons_city").value="";else{$("#cons_name").attr("readonly","readonly"),$("#cons_lastname").attr("readonly","readonly"),$("#cons_dni").attr("readonly","readonly"),$("#cons_phone").attr("readonly","readonly"),$("#cons_cell").attr("readonly","readonly"),$("#cons_email").attr("readonly","readonly"),$("#cons_zipcode").attr("readonly","readonly"),$("#cons_country").attr("readonly","readonly"),$("#cons_region").attr("readonly","readonly"),$("#cons_city").attr("readonly","readonly"),$("#cons_direction").attr("readonly","readonly");var item=eval("("+el.find("option:selected").attr("item")+")");setDataConsignationUser(item)}else if("type"==el.attr("id")){var item=eval("("+el.find("option:selected").attr("item")+")");selectdetailstransport(item.id)}}),$("#dtble").DataTable({order:[[1,"desc"]]}),$("#dtble2").DataTable({order:[[1,"desc"]]})});var createLoad=function(){$("#divButton").attr("disabled","true"),$("#divButton").html("<button type='submit' onclick = 'this.disabled = true' class='btn btn-primary pull-right'><i class='fa fa-circle-o-notch fa-spin'></i> Espere...</button>")},initDropzone=function(){Dropzone.options.myDropzone={autoProcessQueue:!1,uploadMultiple:!1,parallelUploads:100,maxFilesize:8,addRemoveLinks:!0,dictRemoveFile:"eliminar",dictFileTooBig:"el peso del archivo debe ser menor a 8MB",init:function(){var e=document.querySelector("#submit-all"),t=this;e.addEventListener("click",function(e){e.preventDefault(),t.processQueue(),$("#ics_cargo_release_form").submit()}),this.on("addedfile",function(){}),this.on("complete",function(e){t.removeFile(e)}),this.on("success",t.processQueue.bind(t)),t.on("sending",function(e,t,n){n.append("filesize",e.size)})}}},setReleaseData=function(e){e?($("#contact_name").val(e.name+" "+e.last_name),$("#contact_phone").val(e.celular),$("#contact_country").val(e.id),$("#contact_region").val(e.region),$("#contact_city").val(e.city),$("#contact_address").val(e.address),$("#contact_postal_code").val(e.postal_code)):($("#contact_name").val(""),$("#contact_phone").val(""),$("#contact_country").val(""),$("#contact_region").val(""),$("#contact_city").val(""),$("#contact_address").val(""),$("#contact_postal_code").val(""))},cargoReleaseDelete=function(element,from){try{var cargoRelease=getItem(element)||getItemFromParent(element),url=window.location.origin+window.location.pathname+"/"+cargoRelease.id;void 0!=cargoRelease&&bootbox.confirm(eval(msg(messages.delete)),function(e){e&&doForm(url,"delete",void 0,void 0===from||from)})}catch(e){log(e)}},icsGetDetailCargoRelease=function(e){var t=window.location.origin+window.location.pathname+"/"+e+"/view";bootbox.dialog({title:"<span>Informacion</span>",message:$("#load").load(t,function(){$("#icscargoReleaseStatus").select2()}),size:"large",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(e){$("#load").hide().appendTo("body")}).modal("show")},icsShowCargoContaInfo=function(e){var t=window.location.origin+window.location.pathname+"/"+e+"/contact";bootbox.dialog({title:"<span>Informacion de Contacto</span>",message:$("#load").load(t,function(){}),size:"medium",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(e){$("#load").hide().appendTo("body")}).modal("show")},icsChangeStatusCargoRelease=function(e){var t=$("#icscargoReleaseStatus").val(),n=$("#observation").val(),o=window.location.origin+window.location.pathname+"/"+e+"/view";$.ajax({url:o,method:"POST",dataType:"json",data:{status:t,observation:n},beforeSend:function(){},success:function(e){1==e.message&&$("#load").load(o,function(){$("#icscargoReleaseStatus").select2()})},error:function(e){bootbox.alert("Error: "+e.message)}})},countimg=0,countimg=0;