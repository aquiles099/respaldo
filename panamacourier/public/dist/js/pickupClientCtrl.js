"use strict";function loadButton(e){var t=translate();$(e).attr("disabled","true"),$(e).html('<i class="fa fa-circle-o-notch fa-spin"></i> '+t.wait)}function disabledClients(e){$("#name,#phone,#email,#identifier,#direction").attr("disabled","true"===e)}function showPackages(e){$("#packageTitle,#width,#height,#weight,#value,#type,#invoice,#categoryDiv,#taxdiv").attr("style","display:"+e)}function showDestination(e){$("#destinationTitle,#destinationName,#destinationPhone,#destinationEmail,#destinationIdentifier,#destinationSelect,#destinationDirection").attr("style","display:"+e),$("#destin_name,#destin_phone,#destin_email,#destin_identifier,#destin_direction").attr("required","block"===e)}function showClients(e,t){$("#clientTitle,#clientName,#clientPhone,#clientEmail,#clientIdentifier, #clientDirection").attr("style","display:"+e),$("#name,#phone,#email,#identifier,#direction").attr("required","block"==e),disabledClients(t),showPackages(e),showDestination(e)}function showSelects(e){var t=e.selectedIndex,n=e.options[t].value;return 0==n?(document.getElementById("finalDestinationUser").style.display="none",document.getElementById("finalDestinationUser").required=!1,document.getElementById("finalDestinationClient").style.display="block",void(document.getElementById("finalDestinationClient").required=!0)):(document.getElementById("finalDestinationClient").style.display="none",document.getElementById("finalDestinationClient").required=!1,document.getElementById("finalDestinationUser").style.display="block",void(document.getElementById("finalDestinationUser").required=!0))}function showElements(e){return $("#divButton,#divObservation,#divdimens,#divweight,#divvalue").attr("style","display:block,"),1==e?(document.getElementById("client").style.display="block",document.getElementById("divcli").style.display="block",showClients("block","false"),$("#courier,#divTracking,#destination").attr("style","display:none"),document.getElementById("tracking").required=!1):2==e?(document.getElementById("client").style.display="none",document.getElementById("divcli").style.display="none",showClients("none"),$("#courier,#divTracking,#destinationTitle,#destination").attr("style","display:block"),document.getElementById("tracking").required=!0,showPackages("block")):(showClients("none"),$("#client,#courier,#divTracking,#destination,#divButton,#divObservation").attr("style","display:none"),document.getElementById("tracking").required=!1,showPackages("none")),!1}function setDataUsertoring(e){e?(document.getElementById("name").value=e.code+" "+e.name+" "+e.last_name,document.getElementById("phone").value=e.local_phone,document.getElementById("email").value=e.email,document.getElementById("direction").value=e.address,document.getElementById("zipcode").value=e.postal_code,document.getElementById("country").value=e.country,document.getElementById("region").value=e.region):(document.getElementById("name").value="",document.getElementById("phone").value="",document.getElementById("email").value="",document.getElementById("direction").value="",document.getElementById("zipcode").value="",document.getElementById("country").value="",document.getElementById("region").value="")}function setDataDestinationUser(e){e?(document.getElementById("destin_direction").value=e.address,document.getElementById("destin_country").value=e.country,document.getElementById("destin_region").value=e.region,document.getElementById("destin_city").value=e.city,document.getElementById("destin_phone").value=e.local_phone):(document.getElementById("destin_direction").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="",document.getElementById("destin_phone").value="")}function setDataConsignationUser(e){e?(document.getElementById("cons_direction").value=e.address,document.getElementById("cons_country").value=e.country,document.getElementById("cons_region").value=e.region,document.getElementById("cons_city").value=e.city,document.getElementById("cons_phone").value=e.local_phone):(document.getElementById("cons_direction").value="",document.getElementById("cons_country").value="",document.getElementById("cons_region").value="",document.getElementById("cons_city").value="",document.getElementById("cons_phone").value="")}function taxcalculation(){var e,t,n,a,i=$("#value").val(),o=($("#promotionval").val(),0),l=0,s=parseInt($("#promotion option:selected").attr("reduction")),r=parseInt($("#addcharge option:selected").attr("cost")),d=$("#subtotal").val();n=n>0?0:parseInt($("#type option:selected").attr("cost")),a=a>0?0:parseInt($("#service option:selected").attr("cost"));var c,p=$("#category option:selected").attr("porcent")/100;c=""==c?0:parseFloat($("#toinsurance").val());var u=d.replace("$","");$("#taxdiv input").each(function(){var e=$(this).attr("attr-mivalue")/100,t=$(this).attr("id"),n=e*u;o+=n;var a=n.toFixed(2);$("#"+t).val(a+"$")}),e=(o+n+a+r+c).toFixed(2),l=(n+a+r+c).toFixed(2),s>0?(t=e*(s/100),$("#subtotal").val(l.toString()+"$"),$("#promotionval").val("-"+t+"$"),$("#total").val((e-t).toString()+"$")):($("#subtotal").val(l.toString()+"$"),$("#total").val(e.toString()+"$"),$("#promotionval").val("0"))}function calcinsurence(){var e=$("#insurance").val()/100,t=$("#value").val(),n=e*t;$("#toinsurance").val(n.toString()+"$"),taxcalculation()}function deletepickup(e,t){$("#pick"+t).remove(),$("#lipick"+t).remove(),aux-=1,resultvalue()}function pesovol(){for(step=1;step<=aux;step++){var e=$("#pick"+step+" #large"+step).val(),t=$("#pick"+step+" #width"+step).val(),n=$("#pick"+step+" #height"+step).val(),a=e*t*n/1728,i=e*t*n/166;$("#pick"+step+" #volumetricweightm"+step).val(a.toFixed(2).toString()),$("#pick"+step+" #volumetricweighta"+step).val(i.toFixed(2).toString()),console.log("calculando large: "+e+" anch:"+t+" alto:"+n+" mar:"+a+" aer:"+i+"\n")}}function resultvalue(){var e=0;for(step=1;step<=aux;step++){var t=$("#pick"+step+" #valued"+step).val();e+=parseFloat(t)}$("#value").val(e)}function valselect(e){var t=JSON.parse($("#numberparts"+e).find("option:selected").attr("item"));document.getElementById("pieces"+e).value=t.pieces,document.getElementById("large"+e).value=t.large.toFixed(),document.getElementById("width"+e).value=t.width.toFixed(),document.getElementById("height"+e).value=t.height.toFixed(),document.getElementById("volumetricweightm"+e).value=t.volumetricweightm.toFixed(),document.getElementById("volumetricweighta"+e).value=t.volumetricweighta.toFixed(),document.getElementById("weight"+e).value=t.weight.toFixed()}function preview_image(){for(var e=translate(),t=countimg+1,n=document.getElementById("upload_file").files.length,a=0;a<n;a++)$("#image_preview").append("<div class='preview' id='prev"+t+"'><div class='divimg'><img class='thumbnailp' src='"+URL.createObjectURL(event.target.files[a])+"'></div><a class='removeimg' onclick=remove_preview('prev"+t+"')>"+e.delete+"</a>")}function remove_preview(e){$("#"+e).remove()}var aux=1,step,translate=function(){return"es"==messages.language?{mailNotification:"Notificando al correo",loading:"Cargando...",info:"Informacion",back:"Atras",receivedOfficeUsa:"Recibido en oficina (USA)",receivedOfficePa:"Recibido en oficina (PA)",edit:"Editar",processed:"Procesado satisfactoriamente",newClient:"Nuevo cliente",errorFound:"Se Encontraron los siguientes errores: ",errorTry:"Ha ocurrido un error, intentelo de nuevo",typePackage:"Tipos de paquetes recibidos del mes",psckagesInvoice:"Paquetes Con y sin Factura del mes actual",chooseMonth:"Seleccione el mes",noAsync:"no se ha podido procesar la solicitud asíncrona",chooseDay:"Seleccione el dia",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Augosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],cancel:"Cancelar",accept:"Aceptar",serverError:"Ha ocurrido un error en el servidor",wait:"Espere...",loadInvoice:"Cargar Factura",saving:"Guardando datos...",completed:"Completado",chooseClient:"Seleccione el cliente",chooseRoute:"Seleccione la ruta",receipt:"Recibo",stateName:"Nombre del estado",description:"Descripción",alert:"Alerta!!",deleteMessage:"¿Esta seguro que desea eliminar este estado? \nEliminar estados puede producir errores en los paquetes que los usan.",withoutRoute:"Sin rutas para el servicio seleccionado",noNotify:"No notificar",notifyBoth:"Ambos correos",client:"Client",portAirport:"Puerto o Aeropuertos",pieces:"Piezas",value:"Valor",prealert:"Prealerta",chooseOption:"Seleccione una opcion",courier:"Courier",large:"Largo",width:"Ancho",height:"Alto",weight:"Peso",unregistered:"No se encuentra Registrado",delete:"Eliminar",noUser:"No ha seleccionado ningun usuario",typepickup:"Tipo de Recolecta",numberpart:"Numero de Parte",invoice:"Factura",tracking:"Tracking",deletepickup:"¿Esta seguro que desea eliminar la Orden de Recogida?",confirmToWarehouse:"¿Desea agreagar esta orde de recolecta a Almacen?"}:{mailNotification:"Notifying to user email",loading:"Loading...",info:"Details",back:"Previous",receivedOfficeUsa:"Received in office (USA)",receivedOfficePa:"Received in office (PA)",edit:"Edit",processed:"Processed success",newClient:"New Client",errorFound:"Error found: ",errorTry:"Error, try again",typePackage:"Type of packages arrived on the month",psckagesInvoice:"Packages with or without invoice",chooseMonth:"Choose a Month",noAsync:"Could't process async request",chooseDay:"Choose a day",monthNames:["January","February","March","April","May","Jun","July","August","September","October","November","December"],dayNamesMin:["Su","Mo","Th","We","Thr","Fr","Sa"],cancel:"Cancel",accept:"Accept",serverError:"Something went wrong in the server",wait:"Wait...",loadInvoice:"Load Invoice",saving:"Saving data...",completed:"Complete",chooseClient:"Choose a client",chooseRoute:"Choose Route",receipt:"Receipt",stateName:"State Name",description:"Description",alert:"Warning!!",deleteMessage:"Are you sure want to delete this status, this may cause problem whit packages that use it!",withoutRoute:"Don'nt are routes for service choosen",noNotify:"No nofication",notifyBoth:"Both e-mails",client:"Cliente",portAirport:"Port or Airport",pieces:"Pieces",value:"Value",prealert:"Prealert",chooseOption:"Choose an Option",courier:"Courier",large:"Large",width:"Width",height:"Height",weight:"Weight",unregistered:"Not registered",delete:"Delete",noUser:"No user choosen",typepickup:"Tipe of PickUp",numberpart:"Part Number",invoice:"Invoice",tracking:"Tracking",deletepickup:"Are you sure want to delete this PickUp Order?",confirmToWarehouse:"¿Do you want to move this PickUp Order to Warehouse?"}};$(document).ready(function(){$("#pickup_date").datepicker({dateFormat:"yy-mm-dd"}),$("#pickup_hour").datetimepicker({format:"HH:mm:ss"}),$("#since_date").datepicker({dateFormat:"yy-mm-dd"}),$("#until_date").datepicker({dateFormat:"yy-mm-dd"}),$("#deliver_date").datepicker({dateFormat:"yy-mm-dd"}),$("#deliver_hour").datetimepicker({format:"HH:mm:ss"}),$("select").select2(),$("#category").change(function(){}),$("#type").change(function(){}),$("#addcharge").change(function(){calcost(),calctax()}),$("#promotion").change(function(){}),$("#service").change(function(){}),$("#companySelect").change(function(){selectclient($("#companySelect").val())}),$("#invoice").change(function(){"0"==$("#invoice select").val()?$("#uploadinvoice").css("display","none"):$("#uploadinvoice").toggle("fast")}),$("#typeservice").change(function(){$("#costservice").val(parseFloat($("#typeservice option:selected").attr("cost"))+" $"),calcost(),calctax()}),$("select").select2({width:"100%"}).on("select2:select",function(e){var text=translate(),el=$(e.currentTarget);if("from"==el.attr("id"))showElements(el.val());else if("transporter"==el.attr("id"))if(0!=el.find("option:selected").attr("value")){var trans=el.find("option:selected").attr("item");trans=JSON.parse(trans),document.getElementById("transporter_pro").value=trans.numberscac}else document.getElementById("transporter_pro").value="";else if("exporter_dir"==el.attr("id"))"1"==el.find("option:selected").val()?($("#cons_country").removeAttr("readonly"),$("#cons_region").removeAttr("readonly"),$("#cons_city").removeAttr("readonly"),$("#cons_phone").removeAttr("readonly"),$("#cons_direction").removeAttr("readonly"),document.getElementById("cons_direction").value="",document.getElementById("cons_country").value="",document.getElementById("cons_region").value="",document.getElementById("cons_city").value="",document.getElementById("cons_phone").value=""):$("#exporter option:selected").each(function(){var e=$(this).attr("item");0==e&&bootbox.alert(text.noUser),setDataConsignationUser(JSON.parse(e))});else if("consigner_dir"==el.attr("id"))"1"==el.find("option:selected").val()?($("#destin_country").removeAttr("readonly"),$("#destin_region").removeAttr("readonly"),$("#destin_city").removeAttr("readonly"),$("#destin_phone").removeAttr("readonly"),$("#destin_direction").removeAttr("readonly"),document.getElementById("destin_direction").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="",document.getElementById("destin_phone").value=""):$("#consigner option:selected").each(function(){var e=$(this).attr("item");e?0==e&&bootbox.alert(text.noUser):bootbox.alert(text.noUser),setDataDestinationUser(JSON.parse(e))});else if("consigner_dir"==el.attr("id"))"1"==el.find("option:selected").val()&&($("#destin_country").removeAttr("readonly"),$("#destin_region").removeAttr("readonly"),$("#destin_city").removeAttr("readonly"),$("#destin_phone").removeAttr("readonly"),$("#destin_direction").removeAttr("readonly"),document.getElementById("destin_direction").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="",document.getElementById("destin_phone").value="");else if("finalOriginUser"==el.attr("id")){var i=eval("("+el.find("option:selected").attr("item")+")");setDataUsertoring(i)}else if("consigner"==el.attr("id"))if("0"==el.find("option:selected").val())document.getElementById("clientName").classList.remove("hidden"),$("#destin_name").removeAttr("readonly"),$("#destin_country").removeAttr("readonly"),$("#destin_region").removeAttr("readonly"),$("#destin_city").removeAttr("readonly"),$("#destin_phone").removeAttr("readonly"),$("#destin_direction").removeAttr("readonly"),document.getElementById("destin_direction").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="",document.getElementById("destin_phone").value="";else if("addud"==el.find("option:selected").val())$("#destin_country").removeAttr("readonly"),$("#destin_region").removeAttr("readonly"),$("#destin_city").removeAttr("readonly"),$("#destin_phone").removeAttr("readonly"),$("#destin_direction").removeAttr("readonly"),document.getElementById("destin_direction").value="",document.getElementById("destin_country").value="",document.getElementById("destin_region").value="",document.getElementById("destin_city").value="",document.getElementById("destin_phone").value="";else{document.getElementById("clientName").classList.add("hidden"),$("#destin_country").removeAttr("readonly"),$("#destin_region").removeAttr("readonly"),$("#destin_city").removeAttr("readonly"),$("#destin_phone").removeAttr("readonly"),$("#destin_direction").removeAttr("readonly");var item=eval("("+el.find("option:selected").attr("item")+")");setDataDestinationUser(item)}else if("exporter"==el.attr("id"))if("adduc"==el.find("option:selected").val());else{var item=eval("("+el.find("option:selected").attr("item")+")");setDataConsignationUser(item)}else if("type"==el.attr("id")){var item=eval("("+el.find("option:selected").attr("item")+")");if("1"==item.id||"3"==item.id){var auxm=0,x;for(x=1;x<=$("#countpack").val();x++)auxm=parseFloat(auxm)+parseFloat($("#volumetricweightm"+x).val());isNaN(auxm)?$("#volre").val("0 ft3"):$("#volre").val(auxm+" ft3")}else if("2"==item.id){var auxa=0;for(x=1;x<=$("#countpack").val();x++)auxa=parseFloat(auxa)+parseFloat($("#volumetricweighta"+x).val());isNaN(auxa)?$("#volre").val("0 Vlb"):$("#volre").val(auxa+" Vlb")}selectservicio(item.id)}})});var createLoad=function(){var e=translate();$("#divButton").attr("disabled","true"),$("#divButton").html("<button type='submit' onclick = 'this.disabled = true' class='btn btn-primary pull-right'><i class='fa fa-circle-o-notch fa-spin'></i> "+e.wait+"</button>")},preparePayment=function(e){var t=window.location.origin+window.location.pathname+"/"+e+"/payment";bootbox.dialog({title:"<h2>Confirmacion de Pago</h2>",message:$("#load").load(t,function(){}),size:"medium",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(e){$("#load").hide().appendTo("body")}).modal("show")},addpackage=function(){var e=translate();aux+=1,$("#countpack").val(aux),$("#listpack").append("<li id='ics_li_cargo"+aux+"' class='paq'><a data-toggle='tab' href='#pick"+aux+"'><i class='fa fa-circle-o-notch' aria-hidden='true'></i> PKO"+aux+"<span  onclick='icsDelCargoOnBooking("+aux+")' id='ics_del_cargo_on_booking"+aux+"'>  <i class='fa fa-times' aria-hidden='true'></i></span></a></li>"),$("#contentpack").append("<div class='row tab-pane fade' id='pick"+aux+"' style='padding:20px'>\n<div class='col-md-8'>\n <div class='dimensmedidas'  id='divlarge' >\n <label class='col-lg-2 control-label' id='typeLabel' >"+e.description+"</label>\n <div class='col-lg-10'>\n <input type='text' class='form-control' placeholder='"+e.description+"' id='description"+aux+"' name='description"+aux+"' min='1' required='true' value='' >\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n  </div>\n<div class='dimensmedidas'  id='divlarge'>\n<label class='col-lg-2 control-label' id='typeLabel' >"+e.pieces+"</label>\n<div class='col-lg-10'>\n<input type='number' class='form-control' placeholder='"+e.pieces+"' id='pieces"+aux+"' name='pieces"+aux+"' maxlength='10' min='1' required='true' value=''>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas'  id='divlarge'>\n<label class='col-lg-2 control-label' id='typeLabel' >"+e.value+"</label>\n<div class='col-lg-10'>\n<input type='number' class='form-control' placeholder='"+e.value+"' id='valued"+aux+"' name='valued"+aux+"'  maxlength='10' min='1' required='true' value=''>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n</div>\n<div class='col-md-4'>\n<div class='dimensmedidas'  id='divlarge' >\n<label class='col-lg-3 control-label' id='typeLabel' >"+e.large+"</label>\n <div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='"+e.large+"' id='large"+aux+"' name='large"+aux+"' onkeyup='icsGetpesovol()' type='float' maxlength='10' min='1' required='true' value=''>\n<span>in</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas' onkeyup='pesovol()' id='divwidth'>\n<label class='col-lg-3 control-label' id='typeLabel' >"+e.width+"</label>\n<div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='"+e.width+"' id='width"+aux+"' name='width"+aux+"' type='float' maxlength='10' min='1' required='true' value='' >\n<span>in</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n <div class='dimensmedidas' id='divheight'>\n<label class='col-lg-3 control-label' id='typeLabel' >"+e.height+"</label>\n<div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='"+e.height+"' id='height"+aux+"' onkeyup='pesovol()' name='height"+aux+"' type='float' maxlength='10' min='1' required='true' value=''>\n<span>in</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas' id='divheight'>\n<label class='col-lg-3 control-label' id='typeLabel' >Vol(M)</label>\n <div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Vol(M)' id='volumetricweightm"+aux+"' onkeyup='pesovol()' name='volumetricweightm"+aux+"' type='float' readonly='' maxlength='10' min='1' required='true' value='' >\n<span>ft<sup>3</sup></span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas' id='divheight'>\n<label class='col-lg-3 control-label' id='typeLabel' >Vol(A)</label>\n <div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Vol(A)' id='volumetricweighta"+aux+"' onkeyup='pesovol()' name='volumetricweighta"+aux+"' type='float' readonly='' maxlength='10' min='1' required='true' value='' >\n<span>Vlb</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n <div class='dimensmedidas' id='divheight'>\n <label class='col-lg-3 control-label' id='typeLabel' >"+e.weight+"</label>\n<div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='"+e.weight+"' id='weight"+aux+"' onkeyup='pesovol()' name='weight"+aux+"' type='float' maxlength='10' min='1' required='true' value='' >\n<span>lb</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n</div>\n </div>"),$("select").select2()},AddNumberParts=function(e){var t=window.location.origin+window.location.pathname+"/numberparts";$.ajax({url:t,type:"GET",dataType:"json",beforeSend:function(){},success:function(t){LoadDinamicSelectNumberParts(t.message,e)},error:function(e){log(e)}})},AddType=function(e){var t=window.location.origin+window.location.pathname+"/type";$.ajax({url:t,type:"GET",dataType:"json",beforeSend:function(){},success:function(t){console.log(t.message),LoadDinamicSelectType(t.message,e)},error:function(e){log(e)}})},LoadDinamicSelectType=function(e,t){$.each(e,function(n,a){$("#typepickup"+t).append('<option value ="'+e[n].id+'">'+e[n].name+"</option>")})},LoadDinamicSelectNumberParts=function(e,t){var n=translate();$("#numberparts"+t).append('<option item ="" value ="0">'+n.chooseOption+"</option>"),$.each(e,function(n,a){var i=(JSON.stringify(e[n]).replace("\n","&nbsp;"),{name:e[n].name,description:e[n].description.replace(" ","&nbsp;"),pieces:e[n].pieces.replace(" ","&nbsp;"),large:e[n].large.replace(" ","&nbsp;"),width:e[n].width.replace(" ","&nbsp;"),height:e[n].height.replace(" ","&nbsp;"),volumetricweightm:e[n].volumetricweightm.replace(" ","&nbsp;"),volumetricweighta:e[n].volumetricweighta.replace(" ","&nbsp;"),weight:e[n].weight.replace(" ","&nbsp;")}),o=JSON.stringify(i);$("#numberparts"+t).append("<option item ="+o+' value ="'+e[n].id+'">'+e[n].name+"</option>")})},icsDelCargoOnBooking=function(e){var t,n,a;n=!!$("#ics_li_cargo"+e).hasClass("active"),$("#ics_li_cargo"+e).remove(),$("#pick"+e).remove(),t=$(".paq").size(),e===aux&&(aux-=1,$("#ics_li_cargo"+aux).addClass("active "),$("#pick"+aux).addClass("active in")),1==t&&(aux=1),!0===n&&(a=t>1?aux:1,$("#ics_li_cargo"+a).addClass("active "),$("#pick"+a).addClass("active in")),$("#countpack").val(aux),resultvalue()},detailspickup=function(e,t){var n=window.location.origin+window.location.pathname,a=translate();$("#pnlin").hasClass("usrtrck")?bootbox.dialog({title:"<span id='tltgnif'>"+a.info+"</span>",message:$("#load").load(n+"/"+e,function(){}),size:"large",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(e){$("#load").hide().appendTo("body")}).modal("show"):$("#pnlin").hasClass("showpack")?"true"==t?($("#load").html('<p><i class="fa fa-spin fa-spinner"></i> '+a.loading+"</p>"),bootbox.dialog({title:"<a href='' id='bckic' title='atrás' name =''><span class= 'pull-left glyphicon glyphicon-menu-left'></span></a><input type= 'hidden' id='swcl' value ='0'><span id='tltgnif'>"+a.info+"</span>",message:$("#load").load(n+"/"+e+"/view",function(){$("#event").select2()}),size:"large",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(e){$("#load").hide().appendTo("body")}).modal("show")):$("#load").load(n+"/"+e+"/view",function(){$("#event").select2()}):($("#load").html('<p><i class="fa fa-spin fa-spinner"></i> '+a.loading+"</p>"),bootbox.dialog({title:"<a href='javascript:loadBack(false,"+e+")' id='bckic' title='"+a.back+"' name ='0'><span class= 'pull-left glyphicon glyphicon-menu-left'></span></a><input type= 'hidden' id='swcl' value ='0'><span id='tltgnif'>"+a.info+"</span>",message:$("#load").load(n+"/"+e+"/read",function(){$("#pnlft").append('<div class="panel-footer" id="pft"><a href="javascript:loadEditview(0 , '+e+')"><span class="badge" title="Editar"><span class="glyphicon glyphicon-pencil"></span></span></a>&nbsp<a href="javascript:addClient(2,'+e+')" id="adcl"><span class="badge" title="Nuevo Cliente"><span class="glyphicon glyphicon-user"></span></span></a></div>'),$("#pnldel").hide(),$("#pnlin").hasClass("cp")&&($("#adcl").show(),$("#load").addClass("cl"),$("#load").append("<div class = 'text-center' ><h4>Clientes</h4></div><div id='cl' ><p><i class='fa fa-spin fa-spinner'></i> "+a.loading+"</p></div><input type='hidden' id='cpldcl' value = "+e+">"),$("#cl").load(n+"/"+e+"/clients",function(){$("#dtble").DataTable()}))}),size:"large",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#load").show()}).on("hide.bs.modal",function(e){$("#load").hide().appendTo("body")}).modal("show"))},icsLoadTabsAndData=function(){var e=window.location.origin+window.location.pathname+"/details",t=translate();$.ajax({url:e,type:"GET",dataType:"json",beforeSend:function(){},success:function(e){e.message?icsSetTabsData(e.alert):bootbox.alert(t.serverError)},error:function(e){bootbox.alert(t.serverError+e.description)}})},icsSetTabsData=function(e){$.each(e,function(t,n){t>0?($("#listpack").append("<li id='ics_li_cargo"+(t+1)+"' class='paq'><a data-toggle='tab' href='#pick"+(t+1)+"'><i class='fa fa-circle-o-notch' aria-hidden='true'></i> PKO"+(t+1)+"<span  onclick='icsDelCargoOnBooking("+(t+1)+")' id='ics_del_cargo_on_booking"+(t+1)+"'>  <i class='fa fa-times' aria-hidden='true'></i></span></a></li>"),$("#contentpack").append("<div class='row tab-pane fade' id='pick"+(t+1)+"' style='padding:20px'>\n<div class='col-md-8'>\n <div class='dimensmedidas'  id='divlarge' >\n <label class='col-lg-2 control-label' id='typeLabel' >Descripcion</label>\n <div class='col-lg-10'>\n <input type='text' class='form-control' placeholder='Descripcion' id='description"+(t+1)+"' name='description"+(t+1)+"' min='1' required='true' value='"+e[t].description+"'>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n  </div>\n<div class='dimensmedidas'  id='divlarge'>\n<label class='col-lg-2 control-label' id='typeLabel' >Piezas</label>\n<div class='col-lg-10'>\n<input type='number' class='form-control' placeholder='Piezas' id='pieces"+(t+1)+"' name='pieces"+(t+1)+"' maxlength='10' min='1' required='true' value='"+e[t].pieces+"'>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas'  id='divlarge'>\n<label class='col-lg-2 control-label' id='typeLabel' >Valor</label>\n<div class='col-lg-10'>\n<input type='number' class='form-control' placeholder='Valor' id='valued"+(t+1)+"' name='valued"+(t+1)+"'  maxlength='10' min='1' required='true' value='"+e[t].value+"'>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n</div>\n<div class='col-md-4'>\n<div class='dimensmedidas'  id='divlarge' >\n<label class='col-lg-3 control-label' id='typeLabel' >Largo</label>\n <div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Largo' id='large"+(t+1)+"' name='large"+(t+1)+"' onkeyup='pesovol()' type='float' maxlength='10' min='1' required='true' value='"+e[t].large+"'>\n<span>in</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas' onkeyup='pesovol()' id='divwidth'>\n<label class='col-lg-3 control-label' id='typeLabel' >Ancho</label>\n<div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Ancho' id='width"+(t+1)+"' name='width"+(t+1)+"' type='float' maxlength='10' min='1' required='true' value='"+e[t].width+"' >\n<span>in</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n <div class='dimensmedidas' id='divheight'>\n<label class='col-lg-3 control-label' id='typeLabel' >Alto</label>\n<div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Alto' id='height"+(t+1)+"' onkeyup='pesovol()' name='height"+(t+1)+"' type='float' maxlength='10' min='1' required='true' value='"+e[t].height+"'>\n<span>in</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas' id='divheight'>\n<label class='col-lg-3 control-label' id='typeLabel' >Vol(M)</label>\n <div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Vol(M)' id='volumetricweightm"+(t+1)+"' onkeyup='pesovol()' name='volumetricweightm"+(t+1)+"' type='float' readonly='' maxlength='10' min='1' required='true' value='"+e[t].volumetricweightm+"' >\n<span>ft<sup>3</sup></span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n<div class='dimensmedidas' id='divheight'>\n<label class='col-lg-3 control-label' id='typeLabel' >Vol(A)</label>\n <div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Vol(A)' id='volumetricweighta"+(t+1)+"' onkeyup='pesovol()' name='volumetricweighta"+(t+1)+"' type='float' readonly='' maxlength='10' min='1' required='true' value='"+e[t].volumetricweighta+"' >\n<span>Vlb</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n <div class='dimensmedidas' id='divheight'>\n <label class='col-lg-3 control-label' id='typeLabel' >Peso</label>\n<div class='col-lg-9'>\n<input type='number' class='form-control form_dimension' placeholder='Peso' id='weight"+(t+1)+"' onkeyup='pesovol()' name='weight"+(t+1)+"' type='float' maxlength='10' min='1' required='true' value='"+e[t].weight+"' >\n<span>lb</span>\n <span class='help-block' style='margin-bottom: 0px;'></span>\n</div>\n</div>\n</div>\n </div>"),$("#countpack").val(t+1)):($("#description1").val(e[t].description),$("#pieces1").val(e[t].pieces),$('#type1 > option[value="'+e[t].type+'"]').attr("selected","selected"),$('#numberparts1 > option[value="'+e[t].partnumber+'"]').attr("selected","selected"),$("#large1").val(parseFloat(e[t].large)),$("#width1").val(parseFloat(e[t].width)),$("#height1").val(parseFloat(e[t].height)),$("#valued1").val(parseFloat(e[t].value)),$("#invoiced1").val(e[t].invoice),$("#tracking1").val(e[t].tracking),$("#po1").val(e[t].po),$("#volumetricweightm1").val(parseFloat(e[t].volumetricweight)),$("#volumetricweighta1").val(parseFloat(e[t].volumetricweight)),$("#weight1").val(parseFloat(e[t].weight)))}),$("select").select2(),aux=parseInt($("#countpack").val())},countimg=0,selectservicio=function(e){var t=translate();$("#subtotal").val("");var n=window.location.origin+window.location.pathname+"/"+e+"/service/json";$.ajax({url:n,type:"GET",dataType:"json",beforeSend:function(){},success:function(e){$("#typeservice").empty(),$("#typeservice").append("<option value=''>"+t.chooseOption+"</option>"),$.each(e.service,function(e,t){var n="{'id':'"+t.id+"','code':'"+t.code+"','price':'"+t.value+"','name':'"+t.name+"'}";$("#typeservice").append("<option item="+JSON.stringify(n)+" cost='"+parseInt(t.value)+"' value='"+t.id+"'> "+t.name+" "+parseInt(t.value)+"($) </option>")})}})},calcost=function(){
var e,t,n=0,a=0,i=parseInt($("#typeservice option:selected").attr("cost"));if(1==$("#type option:selected").val()||3==$("#type").val()){for(var o=0,l=1;l<=$("#countpack").val();l++)o=parseFloat(o)+parseFloat($("#volumetricweightm"+l).val());n=o}else if(2==$("#type").val()){var s=0;for(l=1;l<=$("#countpack").val();l++)s=parseFloat(s)+parseFloat($("#volumetricweighta"+l).val());n=s}if(t=$("#addcharge option:selected").attr("cost"),t="undefined"===jQuery.type(t)?0:parseFloat($("#addcharge option:selected").attr("cost")),i="undefined"===jQuery.type(i)?0:parseInt($("#typeservice option:selected").attr("cost")),$("#insurance").val()>0){a=$("#value").val()*($("#insurance").val()/100)}e=n*i+t+a,$("#subtotal").val(e.toFixed(2))},calctax=function(){var e,t=parseInt($("#promotion option:selected").attr("reduction"));e=$("#addcharge option:selected").attr("cost"),e="undefined"===jQuery.type(e)?0:parseFloat($("#addcharge option:selected").attr("cost"));var n=0,a=0,i=$("#subtotal").val(),o=$("#subtotal").val()/100,l=$("#taxval").val(),s=l*o;$("#taxre").val(s.toFixed(2));var r=parseFloat(s)+parseFloat(i);if($("#insurance").val()>0){$("#value").val()*($("#insurance").val()/100)}t>0?(n=r*(t/100),a=parseFloat(r)-parseFloat(n),$("#costadd").val(e),$("#promotionval").val("-"+n.toFixed(2)),$("#total").val(a.toFixed(2))):(a=parseFloat(r),$("#costadd").val(e+" $"),$("#edit-promotionval").attr("placeholder","N/A"),$("#promotionval").val(""),$("#total").val(a.toFixed(2)))},calcinsurance=function(){var e=$("#value").val(),t=$("#insurance").val()/100,n=e*t;$("#toinsurance").val(n.toFixed(2)+" $"),calcost(),calctax()};