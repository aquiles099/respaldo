"use strict";$(document).on("ready",function(){icsGetAllTests()});var testDelete=function(element,from){try{var test=getItem(element)||getItemFromParent(element);void 0!=test&&bootbox.confirm(eval(msg(messages.delete)),function(e){e&&doForm("./admin/tests/"+test.id,"delete",void 0,void 0===from||from)})}catch(e){log(e)}},icsChangeStatusTest=function(e){var t=$("#icsserializeform").serialize();$.ajax({url:CURRENT_LOCATION+"/"+e,type:"PATCH",dataType:"json",data:t,beforeSend:function(){icsGeneralLoad("sendButton")},success:function(t){!0===t.message?icsDetails(e,!0):icsShowErrorServer()},error:function(){icsShowErrorAjax()}})},icsTestDoContract=function(element,from){try{var test=getItem(element)||getItemFromParent(element);void 0!=test&&bootbox.confirm(eval(msg(messages.contract)),function(e){e&&doForm("./admin/tests/"+test.id,"post",void 0,void 0===from||from)})}catch(e){log(e)}},icsGetExternalUrl=function(path,test){$.ajax({url:path,type:"GET",dataType:"json",beforeSend:function(){$("#icsLoadExternal").html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> Verificando Pruebas...')},success:function(e){$("#icsLoadExternal").html(""),icsSetStatusTest(e.message,e.terms_date,e.operators,e.clients,test)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");alert(err.Message)}})},icsGetAllTests=function(){$.ajax({url:CURRENT_LOCATION+"/ajax/all",type:"GET",dataType:"json",beforeSend:function(){},success:function(e){icsLoopTests(e.tests)},error:function(e,t,o){bootbox.alert("Error obteniendo listado de prueba"+o)}})},icsLoopTests=function(e){$.each(e,function(t,o){icsGetExternalUrl(e[t].sub_domain+"/admin/api/operator/"+e[t].email,e[t].id)})},icsSetStatusTest=function(e,t,o,s,n){$.ajax({url:CURRENT_LOCATION+"/"+n+"/review",type:"PATCH",dataType:"json",data:{status:e,date:t,operators:o,clients:s},beforeSend:function(){},success:function(e){log(e)},error:function(e,t,o){bootbox.alert("Error asignando estatus de prueba"+o)}})},icsShowTerms=function(e){$.ajax({url:CURRENT_LOCATION+"/"+e+"/terms",type:"GET",dataType:"json",beforeSend:function(){},success:function(e){1==e.message&&bootbox.dialog({title:"<span id='tltgnif'>Informaci√≥n</span>",message:"<p><strong>Fecha de Aceptacion: </strong></p>"+e.terms,size:"small",backdrop:!0,onEscape:function(){}}).on("shown.bs.modal",function(){$("#icsload").show()}).on("hide.bs.modal",function(e){$("#icsload").hide().appendTo("body")}).modal("show")},error:function(e,t,o){bootbox.alert("Error asignando estatus de prueba"+o)}})};